# Configur?ri comune pentru toate serviciile
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# Eureka client configuration
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.instance.prefer-ip-address=true

spring.security.user.name=user
spring.security.user.password=password
spring.security.user.roles=ADMIN,LIBRARIAN

# Config client configuration
spring.cloud.config.uri=http://localhost:8888
spring.cloud.config.fail-fast=true
spring.cloud.config.retry.max-attempts=6
spring.cloud.config.retry.initial-interval=1000
spring.cloud.config.retry.max-interval=2000

# JPA Configuration
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.format_sql=true

# Load Balancing Configuration
spring.cloud.loadbalancer.retry.enabled=true
spring.cloud.loadbalancer.retry.max-retries-on-same-service-instance=2
spring.cloud.loadbalancer.retry.max-retries-on-next-service-instance=3
spring.cloud.loadbalancer.retry.retry-on-all-operations=false

# Feign Configuration
feign.hystrix.enabled=true
feign.client.config.default.connectTimeout=5000
feign.client.config.default.readTimeout=10000
feign.client.config.default.retryer=feign.Retryer.Default

# Ribbon Configuration
ribbon.ReadTimeout=10000
ribbon.ConnectTimeout=5000
ribbon.MaxAutoRetries=1
ribbon.MaxAutoRetriesNextServer=2
ribbon.OkToRetryOnAllOperations=false

# Management and Monitoring - EXTINS
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.endpoint.prometheus.enabled=true
management.metrics.export.prometheus.enabled=true
management.endpoints.enabled-by-default=true
management.endpoints.web.base-path=/actuator

# Custom metrics pentru toate serviciile
management.metrics.web.server.auto-time-requests=true
management.metrics.web.client.auto-time-requests=true
management.metrics.distribution.percentiles-histogram.http.server.requests=true

# Enhanced Logging pentru TOATE serviciile
logging.level.com.library=DEBUG
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.org.springframework.cloud.loadbalancer=DEBUG
logging.level.org.springframework.web=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [%X{traceId:-},%X{spanId:-}] %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [%X{traceId:-},%X{spanId:-}] %logger{36} - %msg%n

# Health indicators pentru toate serviciile
management.health.diskspace.enabled=true
management.health.eureka.enabled=true
management.health.db.enabled=true
